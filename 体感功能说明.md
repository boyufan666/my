# 体感功能使用说明

## ✅ 已修复的问题

### 1. 体感识别已集成 MediaPipe Pose
- ✅ 使用 MediaPipe Pose 进行真正的姿态识别
- ✅ 自动检测手腕、肩膀、肘部等关键点
- ✅ 支持挥手动作检测
- ✅ 提供降级方案（如果 MediaPipe 未加载）

### 2. 体感控制已真正连接游戏
- ✅ 乒乓球：挥动手臂控制球拍位置和击球
- ✅ 节奏光剑：挥动手臂击中方块
- ✅ 羽毛球：挥动手臂击打羽毛球
- ✅ 太极拳：检测姿势动作
- ✅ 园艺游戏：手势控制种植和浇水
- ✅ 家乡记忆：移动身体控制角色移动

### 3. 所有游戏已实现
- ✅ 虚拟乒乓球 (id: 1)
- ✅ 节奏光剑 (id: 2) - **新增**
- ✅ 虚拟园艺 (id: 3)
- ✅ 虚拟羽毛球 (id: 4) - **新增**
- ✅ 虚拟家乡记忆 (id: 5) - **新增**
- ✅ 虚拟太极拳 (id: 6)
- ✅ 记忆配对 (id: 7)
- ✅ 快速计算 (id: 8)
- ✅ 3D麻将 (id: 9) - **新增**
- ✅ 虚拟扑克牌 (id: 10) - **新增**
- ✅ 解谜游戏 (id: 11) - **新增**

## 🎮 如何使用体感控制

### 步骤 1: 启动游戏
1. 进入游戏库，选择支持体感的游戏（运动类游戏）
2. 点击"开始游戏"

### 步骤 2: 启用体感控制
1. 在游戏界面右上角，点击"体感: 关闭"按钮
2. 按钮变为"体感: 开启"（绿色）

### 步骤 3: 启动摄像头
1. 在右下角的体感控制面板中，点击"启动体感控制"
2. 浏览器会请求摄像头权限，点击"允许"
3. 等待摄像头启动（可能需要几秒钟）

### 步骤 4: 开始游戏
- **乒乓球/羽毛球**: 挥动手臂控制球拍，挥手击球
- **节奏光剑**: 挥动手臂击中方块
- **太极拳**: 跟随屏幕上的动作提示
- **园艺**: 挥手种植和浇水
- **家乡记忆**: 移动身体控制角色移动

## 🔧 技术实现

### MediaPipe Pose 集成
- 使用 MediaPipe Pose 进行姿态估计
- 检测 33 个关键点（包括手腕、肩膀、肘部等）
- 实时计算动作强度和位置

### 降级方案
如果 MediaPipe 库未加载，系统会自动使用简化版本：
- 基于视频帧的简化检测
- 提供基本的动作识别功能
- 确保功能可用性

## ⚠️ 注意事项

1. **浏览器要求**
   - 推荐使用 Chrome 或 Edge 浏览器
   - 需要 HTTPS 环境（生产环境自动提供）

2. **摄像头权限**
   - 首次使用需要授权摄像头权限
   - 如果拒绝，需要手动在浏览器设置中允许

3. **性能优化**
   - MediaPipe 首次加载可能需要几秒钟
   - 建议在网络良好的环境下使用

4. **体感游戏列表**
   - 只有标记为"运动类"的游戏支持体感控制
   - 思维类游戏（如记忆配对、计算）不需要体感

## 🐛 故障排查

### 问题：摄像头无法启动
- 检查浏览器权限设置
- 确认摄像头未被其他应用占用
- 尝试刷新页面重新授权

### 问题：体感控制不灵敏
- 确保光线充足
- 保持与摄像头的适当距离（1-2米）
- 确保身体在摄像头视野内

### 问题：MediaPipe 加载失败
- 检查网络连接
- 系统会自动使用降级方案
- 功能仍可使用，但精度可能降低

## 📝 游戏控制说明

### 支持体感的游戏
- 虚拟乒乓球：挥动手臂击球
- 节奏光剑：挥动手臂击中方块
- 虚拟羽毛球：挥动手臂击打羽毛球
- 虚拟太极拳：跟随动作提示
- 虚拟园艺：手势控制种植
- 虚拟家乡记忆：移动身体控制角色

### 不需要体感的游戏
- 记忆配对：点击卡片即可
- 快速计算：点击选项即可
- 3D麻将：点击麻将牌即可
- 虚拟扑克牌：点击卡片即可
- 解谜游戏：拖动拼图即可

---

**所有功能已修复并测试完成！** 🎉

